<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Pager para partidos de liga AJUPAM - Sistema de notificaciones de canchas disponibles">
    <meta name="theme-color" content="#0066CC">
    <title>AJUPAM Pager - Sistema de Notificaciones</title>
    
    <!-- Favicon - usando el mismo del sitio principal -->
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    
    <!-- PWA -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="/pager/icons/icon-192.png">
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="logo-container">
                <img src="/pager/images/logo-ajupam.png" alt="AJUPAM" class="loading-logo">
            </div>
            <div class="loading-spinner"></div>
            <p>Cargando...</p>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <img src="/pager/images/logo-ajupam.png" alt="AJUPAM" class="header-logo">
                <h1 class="header-title">PAGER</h1>
            </div>
            <button id="admin-toggle" class="icon-btn" title="Acceso administrador">
                <i class="fas fa-user-shield"></i>
            </button>
        </header>

        <!-- User View -->
        <main id="user-view" class="view active">
            <section class="hero-section">
                <div class="hero-content">
                    <div class="hero-icon">
                        <i class="fas fa-bell"></i>
                    </div>
                    <h2 class="hero-title">¡RECIBÍ NOTIFICACIONES!</h2>
                    <p class="hero-subtitle">Escaneá el QR de tu cancha favorita y te avisaremos cuando esté libre</p>
                </div>
            </section>

            <section class="scan-section">
                <div class="scan-container">
                    <button id="scan-qr-btn" class="btn-primary large">
                        <i class="fas fa-qrcode"></i>
                        <span>ESCANEAR QR</span>
                    </button>
                    <p class="scan-hint">O ingresá el código manualmente</p>
                    <div class="manual-input">
                        <input type="text" id="manual-code" placeholder="Código de cancha" maxlength="10">
                        <button id="manual-submit" class="btn-secondary">
                            <i class="fas fa-check"></i>
                        </button>
                    </div>
                </div>
            </section>

            <section class="subscriptions-section">
                <h3 class="section-title">MIS SUSCRIPCIONES</h3>
                <div id="subscriptions-list" class="subscriptions-list">
                    <div class="empty-state">
                        <i class="fas fa-inbox"></i>
                        <p>Aún no estás suscripto a ninguna cancha</p>
                        <p class="hint">Escaneá un código QR para comenzar</p>
                    </div>
                </div>
            </section>
        </main>

        <!-- Admin View -->
        <main id="admin-view" class="view">
            <!-- Admin Login -->
            <section id="admin-login" class="admin-login">
                <div class="login-container">
                    <div class="login-header">
                        <i class="fas fa-shield-alt"></i>
                        <h2>PANEL DE ADMINISTRACIÓN</h2>
                    </div>
                    <form id="login-form" class="login-form">
                        <div class="form-group">
                            <label for="admin-email">Email</label>
                            <input type="email" id="admin-email" required autocomplete="username">
                        </div>
                        <div class="form-group">
                            <label for="admin-password">Contraseña</label>
                            <input type="password" id="admin-password" required autocomplete="current-password">
                        </div>
                        <button type="submit" class="btn-primary">
                            <span>INICIAR SESIÓN</span>
                        </button>
                    </form>
                    <button id="back-to-user" class="btn-text">
                        <i class="fas fa-arrow-left"></i>
                        Volver al inicio
                    </button>
                </div>
            </section>

            <!-- Admin Dashboard -->
            <section id="admin-dashboard" class="admin-dashboard" style="display: none;">
                <div class="admin-header">
                    <h2>PANEL DE CONTROL</h2>
                    <button id="logout-btn" class="btn-secondary small">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Salir</span>
                    </button>
                </div>

                <!-- Court Configuration -->
                <div class="config-section">
                    <h3 class="section-title">CONFIGURACIÓN DE CANCHAS</h3>
                    <div class="config-controls">
                        <label for="court-count">Cantidad de canchas:</label>
                        <div class="number-input">
                            <button class="btn-number" data-action="decrease">-</button>
                            <input type="number" id="court-count" min="1" max="20" value="6" readonly>
                            <button class="btn-number" data-action="increase">+</button>
                        </div>
                        <button id="save-config" class="btn-primary">
                            <i class="fas fa-save"></i>
                            <span>GUARDAR</span>
                        </button>
                    </div>
                </div>

                <!-- QR Codes -->
                <div class="qr-section">
                    <div class="qr-header">
                        <h3 class="section-title">CÓDIGOS QR</h3>
                        <button id="download-all-qr" class="btn-secondary">
                            <i class="fas fa-download"></i>
                            <span>Descargar todos</span>
                        </button>
                    </div>
                    <div id="qr-codes-grid" class="qr-grid">
                        <!-- QR codes will be generated here -->
                    </div>
                </div>

                <!-- Courts Management -->
                <div class="courts-section">
                    <h3 class="section-title">NOTIFICAR CANCHA DISPONIBLE</h3>
                    <div id="courts-grid" class="courts-grid">
                        <!-- Courts will be generated here -->
                    </div>
                </div>

                <!-- Statistics -->
                <div class="stats-section">
                    <h3 class="section-title">ESTADÍSTICAS</h3>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <i class="fas fa-users"></i>
                            <div class="stat-value" id="total-subscribers">0</div>
                            <div class="stat-label">Suscriptores Totales</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-bell"></i>
                            <div class="stat-value" id="notifications-today">0</div>
                            <div class="stat-label">Notificaciones Hoy</div>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-chart-line"></i>
                            <div class="stat-value" id="active-courts">0</div>
                            <div class="stat-label">Canchas Activas</div>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <p>Desarrollado por <a href="https://tandempadel.pro" target="_blank" rel="noopener">Tandem</a></p>
            <p class="copyright">© 2025 AJUPAM - Todos los derechos reservados</p>
        </footer>
    </div>

    <!-- QR Scanner Modal -->
    <div id="qr-scanner-modal" class="modal">
        <div class="modal-content scanner-modal">
            <div class="modal-header">
                <h3>ESCANEAR CÓDIGO QR</h3>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="qr-reader"></div>
            <p class="scanner-hint">Apuntá la cámara al código QR de la cancha</p>
        </div>
    </div>

    <!-- Notification Message Modal -->
    <div id="notification-modal" class="modal">
        <div class="modal-content notification-modal">
            <div class="modal-header">
                <h3 id="notification-title">CANCHA DISPONIBLE</h3>
                <button class="close-modal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <label for="notification-message">Mensaje personalizado (opcional):</label>
                <textarea id="notification-message" rows="4" placeholder="Ej: ¡Vengan rápido! Faltan jugadores para un partido"></textarea>
                <div class="modal-actions">
                    <button id="send-notification" class="btn-primary">
                        <i class="fas fa-paper-plane"></i>
                        <span>ENVIAR NOTIFICACIÓN</span>
                    </button>
                    <button class="btn-secondary close-modal">
                        Cancelar
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container"></div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-messaging-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- QR Code Libraries -->
    <script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" integrity="sha512-CNgIRecGo7nphbeZ04Sc13ka07paqdeTu0WR1IM4kNcpmBAUSHSQX0FslNhTDadL4O5SAGapGt4FodqL8My0mA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
    
    <!-- App Scripts -->
    <script src="js/firebase-config.js"></script>
    <script src="js/app.js"></script>
</body>
</html>