########################################
# üîê SEGURIDAD B√ÅSICA
########################################

<FilesMatch "\.(env|git|yml|log|sql|sh)$">
  Order allow,deny
  Deny from all
</FilesMatch>

Options -Indexes

<Files ~ "^\.ht">
  Order allow,deny
  Deny from all
</Files>

########################################
# üõ°Ô∏è HEADERS DE SEGURIDAD (ACTIVABLE)
########################################

# <IfModule mod_headers.c>
#   Header always append X-Frame-Options SAMEORIGIN
#   Header set X-XSS-Protection "1; mode=block"
#   Header set X-Content-Type-Options nosniff
#   Header set Referrer-Policy "strict-origin-when-cross-origin"
#   Header unset Server
#   Header unset X-Powered-By
# </IfModule>

########################################
# üöÄ RENDIMIENTO Y OPTIMIZACI√ìN
########################################

# Compresi√≥n GZIP
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/plain text/css application/javascript application/json image/svg+xml image/webp
</IfModule>

# Cache de im√°genes
<IfModule mod_expires.c>
  ExpiresActive On
  ExpiresByType image/jpeg "access plus 1 month"
  ExpiresByType image/png "access plus 1 month"
  ExpiresByType image/webp "access plus 1 month"
  ExpiresByType image/svg+xml "access plus 1 month"
  ExpiresByType image/gif "access plus 1 month"
</IfModule>

########################################
# üîÅ REDIRECCIONES Y REESCRITURA
########################################

RewriteEngine On

# Redirigir HTTP a HTTPS
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]

# Redirigir /sponsors/ a landing
RewriteRule ^sponsors/?$ /sponsors/economicos.html [L]

# Ocultar extensiones en /sponsors/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^sponsors/([a-zA-Z0-9_-]+)$ sponsors/$1.html [L]

########################################
# ‚ö†Ô∏è P√ÅGINAS DE ERROR PERSONALIZADAS
########################################

ErrorDocument 404 /error/404.html
ErrorDocument 403 /error/403.html
ErrorDocument 500 /error/500.html

########################################
# üîí PROTECCIONES ADICIONALES
########################################

<Files "*.yml">
  Order allow,deny
  Deny from all
</Files>

<Files "*.json">
  Order allow,deny
  Deny from all
</Files>

<Files "manifest.json">
  Order deny,allow
  Allow from all
</Files>

<FilesMatch "\.(bak|backup|old|orig|save)$">
  Order allow,deny
  Deny from all
</FilesMatch>

########################################
# üìß HEADERS PARA FORMULARIOS
########################################

<FilesMatch "\.html$">
  <IfModule mod_headers.c>
    Header set Access-Control-Allow-Methods "POST, GET, OPTIONS"
  </IfModule>
</FilesMatch>

########################################
# üåê CONFIGURACI√ìN ARGENTINA
########################################

<IfModule mod_env.c>
  SetEnv TZ America/Argentina/Mendoza
</IfModule>

########################################
# üõ†Ô∏è MODO MANTENIMIENTO (DESACTIVADO)
########################################

# Para activar, reemplaz√° TU_IP_AQUI por tu IP real
# RewriteEngine On
# RewriteCond %{REQUEST_URI} !^/error/maintenance\.html$
# RewriteCond %{REQUEST_URI} !^/images/
# RewriteCond %{REQUEST_URI} !^/css/
# RewriteCond %{REQUEST_URI} !^/js/
# RewriteCond %{REMOTE_ADDR} !^TU_IP_AQUI$
# RewriteRule ^(.*)$ /error/maintenance.html [R=503,L]